{% extends 'header_base.html' %}

{% block content %}
<!-- SweetAlert2 CSS -->
<link rel="stylesheet" href="static/sweetalert2.min.css">
<link rel="stylesheet" href="static/admin_assets/vendor/css/core.css" class="template-customizer-core-css" />
<link rel="stylesheet" href="static/assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
<link rel="stylesheet" href="static/admin_assets/vendor/fonts/boxicons.css" />
<!-- SweetAlert2 JS -->
<script src="static/sweetalert2@11.js"></script>


<div class="container">
    <div class="row gutters">
        <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-60">
            <div class="card h-100">
                <div class="card-body" style="border: 1px solid; border-radius: 10px;" >
                    <div class="account-settings">
                        <div class="user-profile">
                            <div class="user-avatar" onclick="triggerFileInput()">
                                {% if user.profile_pic %}
                                
                                    <img id="companyLogo" src="data:image/jpeg;base64,{{ user.profile_pic }}" style="height: 280px; width: 280px;" alt="User Profile">
                                {% else %}
                                    <img id="companyLogo" src="static/user.png" style="height: 280px; width: 280px;" alt="User Profile">
                                {% endif %}
                            </div>
                            <form id="changeLogoForm" action="/change_profile" method="post" enctype="multipart/form-data">
                                <input type="file" id="fileInput" name="profile_pic" style="display: none;" accept="image/*" onchange="uploadLogo()">
                                <div class="mt-2"  style="padding-left: 50px;">
                                    <label for="fileInput" style="padding-left: 40px;" class="genric-btn primary-border small">
                                        <i class="fa fa-fw fa-camera"></i>
                                        <span >Change Photo</span>
                                    </label>
                                </div>
                                <button type="submit" style="display: none;">Submit</button>
                            </form>
                
                            {% set fields = [
                                user.firstname, user.middlename, user.lastname, user.suffix, user.address,
                                user.gender, user.phone, user.civil_status, user.height, user.landline,
                                user.houseNoStreet, user.brgy, user.city, user.province, user.religion,
                                user.tinID, user.gsisNO, user.pagibigNo, user.philNo, user.disability,
                                user.employmentType, user.employmentStatus, user.activeWork, user.willingToWork,
                                user.porPs, user.prefoccupation, user.preflocation, user.salary, user.passportNo,
                                user.elemschool, user.yearGradElem, user.secondarySchool, user.yearGradSec,
                                user.terSchool, user.courseTer, user.yearGradTer, user.gradSchool, user.courseGrad,
                                user.yearGradGrad, user.skills, user.birthday, user.passportExp
                            ] %}
                            {% set total_fields = fields | length %}
                            {% set filled_fields = fields | select('ne', 'None') | select('ne', '') | select('ne', none) | list | length %}
                            {% set completion_percentage = ((filled_fields / total_fields * 100) | round(0)) | int %}
                            
                            <div style="width: 100%; background-color: #ddd;">
                                <div style="width: {{ completion_percentage }}%; background-color: green; height: 20px; color: white; text-align: center;">
                                    {{ completion_percentage }}% Profile Completed
                                </div>
                            </div>
                            
                            <a class="genric-btn primary" id="generateFormLink" href="/job_seeker_form_preview" target="_blank"
                               style="display: block; text-align: center; margin-top: 10px; {{ 'pointer-events: none; opacity: 0.5;' if completion_percentage < 100 else '' }}">
                                Generate Form
                            </a>
                            <span id="completionNotice" style="font-size: smaller; color: tomato; display: {{ 'block' if completion_percentage < 100 else 'none' }}; text-align: center; margin-top: 5px;">
                                Complete profile first
                            </span>
   
                            <a class="genric-btn primary" href="/resume_preview_applicant" target="_blank" style="display: block; text-align: center; margin-top: 10px;">
                                Build Resume
                            </a>
                            {% if user.jobform %}
                            {% if user.workStatus in ['Under Review', 'Approved'] %}
                                <a type="button" style="display: block !important; text-align: center; margin-top: 10px; color: yellow; " class="genric-btn primary" >
                                    Your application is {{ user.workStatus }}
                                </a>
                            {% else %}
                                <a type="button" style="display: block !important; text-align: center; margin-top: 10px; color: #ccc; " class="genric-btn primary" data-toggle="modal" data-target="#applyModal">
                                    Resubmit new form
                                </a>
                            {% endif %}
                        {% else %}
                            <a type="button" style="display: block !important; text-align: center; margin-top: 10px; color: #ccc; " class="genric-btn primary" data-toggle="modal" data-target="#applyModal">
                                Apply
                            </a>
                        {% endif %}
                            <style>
                                /* Optional: Ensure SweetAlert2 is on top of everything */
                                .swal2-container {
                                    z-index: 9999;
                                }
                            </style>
                           
                        </div>
                        <div class="modal fade" id="applyModal" tabindex="-1" role="dialog" aria-labelledby="applyModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="applyModalLabel">Upload Job seeker form</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                    
                                        <form id="uploadForm" action="/apply_peso" method="POST" enctype="multipart/form-data">
                                            <div class="form-group"></div>
                                            <div class="form-group">
                                                <p><span style="color: tomato; text-decoration: solid;">Note: </span>Uploading the form will automatically submit the application to PESO.</p>
                                                <input type="file" class="form-control-file" id="fileInput" name="fileInput" required>
                                            </div>
                                            <!-- Hidden input field to include the company_id -->
                                            <button type="submit" class="genric-btn primary float-right">Submit</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <script>
                            document.getElementById('uploadForm').addEventListener('submit', function(event) {
                                event.preventDefault();  // Prevent the default form submission
                    
                                var formData = new FormData(this);
                    
                                fetch('/apply_peso', {
                                    method: 'POST',
                                    body: formData
                                })
                                .then(response => {
                                    if (!response.ok) {
                                        throw new Error('Network response was not ok');
                                    }
                                    return response.json();
                                })
                                .then(data => {
                                    if (data.error) {
                                        Swal.fire({
                                            icon: 'error',
                                            title: 'Error',
                                            text: data.error,
                                        });
                                    } else {
                                        Swal.fire({
                                            icon: 'success',
                                            title: 'Success',
                                            text: 'File uploaded successfully!',
                                        }).then((result) => {
                                            if (result.isConfirmed) {
                                                window.location.href = '/user_profile';  // Redirect to user profile
                                            }
                                        });
                                    }
                                })
                                .catch(error => {
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Error',
                                        text: 'There was an error uploading the file!',
                                    });
                                    console.error('There was an error!', error);
                                });
                            });
                        </script>
                        <script>

                            function triggerFileInput() {
                                document.getElementById('fileInput').click();
                            }

                            function uploadLogo() {
                                document.getElementById('changeLogoForm').submit();
                            }
                        </script>
                    </div>
                </div>
            </div>
        </div>

<div class="col-xl-9 col-lg-12 col-md-12 col-sm-12 col-12">
<div class="card h-100">
	<div class="card-body" style="border: 1px solid; border-radius: 10px;">
        <form class="form-contact contact_form" action="/edit_profile" method="post" id="setupAccountForm" novalidate="novalidate">
		<div class="row gutters">
			<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" style="margin-bottom: 20px;">
				<b style="font-size: 20px;" > User Profile </b>
                <span style="font-size: smaller; color: tomato; margin-left: 10px;">Note: Input NA if not applicable</span>
			</div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="name">First name</label>
                    <div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-user"></i></span>
                    <input type="text" name="firstname" class="form-control" id="firstname" placeholder="{{ user.firstname }}" value="{{ user.firstname }}" required>
                </div>
            </div>
            </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="name">Middle name</label>
                    <div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-user"></i></span>
                    <input type="text" name="middlename" class="form-control" id="middlename" placeholder="{{ user.middlename }}" value="{{ user.middlename }}" required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="name">Last name</label>
                    <div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-user"></i></span>
                    <input type="text" name="lastname" class="form-control" id="lastname" placeholder="{{ user.lastname }}" value="{{ user.lastname }}" required>
                </div>
            </div></div>
            
            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="name">Suffix</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-user"></i></span>
                    <input type="text" name="suffix" class="form-control" id="suffix" placeholder="{{ user.suffix }}" value="{{ user.suffix }}" required>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="birthday">Date of Birth</label>
                    <div class="input-group date" id="datepicker">
                        <input type="text" class="form-control" name="birthday" id="birthday" placeholder="{{ user.birthday }}" value="{{ user.birthday }}">
                        <span class="input-group-append">
                            <span class="input-group-text bg-white">
                                <i class="fa fa-calendar"></i>
                            </span>
                        </span>
                    </div>
                </div>
            </div>
         	

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="address">Place of birth</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-pin"></i></span>
                    <input type="text" name="address"class="form-control" id="address" placeholder="{{ user.address }}" value="{{ user.address }}"  required>
                </div>
            </div>
            </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="gender">Sex</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                           <i class='bx bx-male-sign' ></i></span>
                    <select name="gender" style="border: 1px solid #ccc !important; display: block; width: 100%;" class="form-control" required>
                        <option value=""selected disabled>Select Gender</option>
                        <option value="Male" {% if user.gender == 'Male' %} selected {% endif %}>Male</option>
                        <option value="Female" {% if user.gender == 'Female' %} selected {% endif %}>Female</option>
                    </select>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="religion">Religion</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-church"></i></span>
                    <input type="text"  name="religion" class="form-control" id="religion" placeholder="{{ user.religion }}" value ="{{ user.religion }} " required>
                </div>
            </div>
        </div>
            
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="civil_status">Civil Status</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-home-circle"></i></span>
                    <select name="civil_status" style="border: 1px solid #ccc !important; display: block; width: 100%;" class="form-control" required>
                        <option value=""selected disabled>Select Civil Status</option>
                        <option value="Single" {% if user.civil_status == 'Single' %} selected {% endif %}>Single</option>
                        <option value="Married" {% if user.civil_status == 'Married' %} selected {% endif %}>Married</option>
                        <option value="Widowed" {% if user.civil_status == 'Widowed' %} selected {% endif %}>Widowed</option>
                        <option value="Separated" {% if user.civil_status == 'Separated' %} selected {% endif %}>Separated</option>
                        <option value="Live-in" {% if user.civil_status == 'Live-in' %} selected {% endif %}>Live-in</option>
                    </select>
                </div>
            </div>
        </div>
        

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    
                </div>
            </div>

            <div style="border-bottom: 3px solid #ccc; margin-bottom: 40px;" class="col-12" >
            </div>
            

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="houseNoStreet">House no. / Street Village</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-building-house"></i></span>
                    <input type="text" name="houseNoStreet"class="form-control" id="houseNoStreet" placeholder="{{ user.houseNoStreet }}" value="{{ user.houseNoStreet }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="brgy">Barangay</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-building-house"></i></span>
                    <input type="text" name="brgy"class="form-control" id="brgy" placeholder="{{ user.brgy }}" value="{{ user.brgy }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="city">City</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-building-house"></i></span>
                    <input type="text" name="city"class="form-control" id="city" placeholder="{{ user.city }}" value="{{ user.city }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="province">Province</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-building-house"></i></span>
                    <input type="text" name="province"class="form-control" id="province" placeholder="{{ user.province }}" value="{{ user.province }}"  required>
                </div>
            </div>
        </div>

        



            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="height">Height</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-ruler"></i></span>
                    <input type="text" name="height"class="form-control" id="height" placeholder="{{ user.height }}" value="{{ user.height }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="email">Email</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-envelope' ></i></span>
                    <input type="email" name="email"class="form-control" id="email" placeholder="{{ user.email }}" value="{{ user.email }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="phone">Cellphone No.</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-phone"></i></span>
                    <input type="number" name="phone"class="form-control" id="phone" placeholder="{{ user.phone }}" value="{{ user.phone }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="landline">Landline No.</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class="bx bx-phone"></i></span>
                    <input type="number" name="landline" class="form-control" id="landline" placeholder="{{ user.landline }}" value="{{ user.landline }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="tinID">TIN </label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-id-card'></i></span>
                    <input type="number" name="tinID"class="form-control" id="tinID" placeholder="{{ user.tinID }}" value="{{ user.tinID }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="gsisNO">GSIS / SSS ID</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-id-card'></i></span>
                    <input type="number" name="gsisNO"class="form-control" id="gsisNO" placeholder="{{ user.gsisNO }}" value="{{ user.gsisNO }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="pagibigNo">PAG IBIG No.</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-id-card'></i></span>
                    <input type="number" name="pagibigNo"class="form-control" id="pagibigNo" placeholder="{{ user.pagibigNo }}" value="{{ user.pagibigNo }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="philNo">PhilHealth No.</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-id-card'></i></span>
                    <input type="number" name="philNo"class="form-control" id="philNo" placeholder="{{ user.philNo }}" value="{{ user.philNo }}"  required>
                </div>
            </div>
        </div>
        <div style="border-bottom: 3px solid #ccc; margin-bottom: 40px;" class="col-12" >
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="disability">Disability</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-handicap' ></i></span>
                    <select name="disability" style="border: 1px solid #ccc !important; display: block; width: 100%;" class="form-control" required>
                        <option value=""selected disabled>Select Disability</option>
                        <option value="NA" {% if user.disability == 'NA' %} selected {% endif %}>NA</option>
                        <option value="Visual" {% if user.disability == 'Visual' %} selected {% endif %}>Visual</option>
                        <option value="Hearing" {% if user.disability == 'Hearing' %} selected {% endif %}>Hearing</option>
                        <option value="Speech" {% if user.disability == 'Speech' %} selected {% endif %}>Speech</option>
                        <option value="Physical" {% if user.disability == 'Physical' %} selected {% endif %}>Physical</option>
                        <option value="Others" {% if user.disability == 'Others' %} selected {% endif %}>Others</option>
                    </select>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="employmentStatus">Employment Status</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-briefcase' ></i></span>
                    <select name="employmentStatus" style="border: 1px solid #ccc !important; display: block; width: 100%;" class="form-control" required>
                        <option value=""selected disabled>Select Employment Status</option>
                        <option value="Employed" {% if user.employmentStatus == 'Employed' %} selected {% endif %}>Employed</option>
                        <option value="Unemployed" {% if user.employmentStatus == 'Unemployed' %} selected {% endif %}>Unemployed</option>
                    </select>
                </div>
            </div>
        </div>

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    <label for="employmentType">Employment Type</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-briefcase' ></i></span>
                    <select name="employmentType" style="border: 1px solid #ccc !important; display: block; width: 100%;" class="form-control" required>
                        <option value=""selected disabled>Select Employement Type</option>
                        <option class="highlight-option" value=""  disabled>Option for Employed </option>
                        <option value="Wage Employed" {% if user.employmentType == 'Wage Employed' %} selected {% endif %}>Wage Employed</option>
                        <option value="Self Employed" {% if user.employmentType == 'Self Employed' %} selected {% endif %}>Self Employed</option>
                        <option class="highlight-option" value="" disabled>Option for Unemployed </option>
                        <option value="New Entrant/Fresh Graduate" {% if user.employmentType == 'New Entrant/Fresh Graduate' %} selected {% endif %}>New Entrant/Fresh Graduate</option>
                        <option value="Terminated/Laidoff(local)" {% if user.employmentType == 'Terminated/Laidoff(local)' %} selected {% endif %}>Terminated/Laidoff(local)</option>
                        <option value="Finished Contract" {% if user.employmentType == 'Finished Contract' %} selected {% endif %}>Finished Contract</option>
                        <option value="Resigned" {% if user.employmentType == 'Resigned' %} selected {% endif %}>Resigned</option>
                        <option value="Retired" {% if user.employmentType == 'Retired' %} selected {% endif %}>Retired</option>
                        <option value="Terminated/Laidoff(abroad)" {% if user.employmentType == 'Terminated/Laidoff(abroad)' %} selected {% endif %}>Terminated/Laidoff(abroad)</option>
                        <option value="Others" {% if user.employmentType == 'Others' %} selected {% endif %}>Others</option>
                    </select>
                </div>
                </div>
            </div>
       

            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                <div class="form-group">
                    
                </div>
            </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="activeWork">Are you actively looking for work?</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-question-mark' ></i></span>
                    <select name="activeWork" style="border: 1px solid #ccc !important; display: block; width: 100%;" class="form-control" required>
                        <option value="" selected disabled>Select</option>
                        <option value="Yes" {% if user.activeWork == 'Yes' %} selected {% endif %}>Yes</option>
                        <option value="No" {% if user.activeWork == 'No' %} selected {% endif %}>No</option>
                    </select>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="willingToWork">Willing to work immediately?</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-question-mark' ></i></span>
                    <select name="willingToWork" style="border: 1px solid #ccc !important; display: block; width: 100%;" class="form-control" required>
                        <option value="" selected disabled>Select</option>
                        <option value="Yes" {% if user.willingToWork == 'Yes' %} selected {% endif %}>Yes</option>
                        <option value="No" {% if user.willingToWork == 'No' %} selected {% endif %}>No</option>
                    </select>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="porPs">Are you a 4Ps beneficiary?</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-question-mark' ></i></span>
                    <select name="porPs" style="border: 1px solid #ccc !important; display: block; width: 100%;" class="form-control" required>
                        <option value="" selected disabled>Select</option>
                        <option value="Yes" {% if user.porPs == 'Yes' %} selected {% endif %}>Yes</option>
                        <option value="No" {% if user.porPs == 'No' %} selected {% endif %}>No</option>
                    </select>
                </div>
            </div>
        </div>

            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                <div class="form-group">
                    <label for="prefoccupation">Preferred Occupation</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-briefcase-alt-2' ></i></span>
                    <input type="text" name="prefoccupation" class="form-control" id="prefoccupation" placeholder="{{ user.prefoccupation }}" value="{{ user.prefoccupation }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                <div class="form-group">
                    <label for="preflocation">Preferred Work Location</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-pin' ></i></span>
                    <select name="preflocation" style="border: 1px solid #ccc !important; display: block; width: 100%;" class="form-control" required>
                        <option value="" selected disabled>Select</option>
                        <option value="Local,specify cities/municipalities" {% if user.preflocation == 'Local,specify cities/municipalities' %} selected {% endif %}>Local,specify cities/municipalities</option>
                        <option value="Overseas,specify countries" {% if user.preflocation == 'Overseas,specify countries' %} selected {% endif %}>Overseas,specify countries</option>
                    </select>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="salary">Expected Salary</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-money'></i></span>
                    <input type="number" name="salary"class="form-control" id="salary" placeholder="{{ user.salary }}" value="{{ user.salary }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="passportNo">Passport No.</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-book-bookmark'></i></span>
                    <input type="number" name="passportNo"class="form-control" id="passportNo" placeholder="{{ user.passportNo }}" value="{{ user.passportNo }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="passportExp">Passport Expiry Date</label>
                    <div class="input-group date" id="passportExpDatepicker">
                        <input type="text" class="form-control" name="passportExp" id="passportExp" placeholder="{{ user.passportExp }}" value="{{ user.passportExp }}">
                        <span class="input-group-append">
                            <span class="input-group-text bg-white">
                                <i class="fa fa-calendar"></i>
                            </span>
                        </span>
                    </div>
                </div>
            </div>
            <div style="border-bottom: 3px solid #ccc; margin-bottom: 40px;" class="col-12" >
            </div>
            

            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                <div class="form-group">
                    <label for="elemschool">Elementary School</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bxs-school' ></i></span>
                    <input type="text" name="elemschool" class="form-control" id="elemschool" placeholder="{{ user.elemschool }}" value="{{ user.elemschool }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                <div class="form-group">
                    <label for="yearGradElem">Year Graduated</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bxs-graduation'></i></span>
                    <input type="number" name="yearGradElem" class="form-control" id="yearGradElem" placeholder="{{ user.yearGradElem }}" value="{{ user.yearGradElem }}"  required>
                </div>
            </div>
        </div>
            
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                <div class="form-group">
                    <label for="secondarySchool">Secondary Education School</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bxs-school' ></i></span>
                    <input type="text" name="secondarySchool" class="form-control" id="secondarySchool" placeholder="{{ user.secondarySchool }}" value="{{ user.secondarySchool }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                <div class="form-group">
                    <label for="yearGradSec">Year Graduated</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bxs-graduation'></i></span>
                    <input type="number" name="yearGradSec" class="form-control" id="yearGradSec" placeholder="{{ user.yearGradSec }}" value="{{ user.yearGradSec }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="terSchool">Tertiary School</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bxs-school' ></i></span>
                    <input type="text" name="terSchool" class="form-control" id="terSchool" placeholder="{{ user.terSchool }}" value="{{ user.terSchool }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="courseTer">Course</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-book-open'></i></span>
                    <input type="text" name="courseTer" class="form-control" id="courseTer" placeholder="{{ user.courseTer }}" value="{{ user.courseTer }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="yearGradTer">Year Graduated</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bxs-graduation'></i></span>
                    <input type="number" name="yearGradTer" class="form-control" id="yearGradTer" placeholder="{{ user.yearGradTer }}" value="{{ user.yearGradTer }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="gradSchool">Graduate Studies</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bxs-school' ></i></span>
                    <input type="text" name="gradSchool" class="form-control" id="gradSchool" placeholder="{{ user.gradSchool }}" value="{{ user.gradSchool }}"  required>
                </div>
            </div>
        </div>

            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="courseGrad">Course</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bx-book-open'></i></span>
                    <input type="text" name="courseGrad" class="form-control" id="courseGrad" placeholder="{{ user.courseGrad }}" value="{{ user.courseGrad }}"  required>
                </div>
            </div>
        </div>

        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                    <label for="yearGradGrad">Year Graduated</label><div class="input-group input-group-merge">
                        <span id="basic-icon-default-phone2" class="input-group-text">
                            <i class='bx bxs-graduation'></i></span>
                    <input type="number" name="yearGradGrad" class="form-control" id="yearGradGrad" placeholder="{{ user.yearGradGrad }}" value="{{ user.yearGradGrad }}"  required>
                </div>
            </div>
        </div>

        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
            <div class="form-group">
                <label for="skills">Skills  <span style="color:darkgoldenrod;">Comma Separated (Leadership, Creativity)</span></label>
                <div class="input-group input-group-merge">
                    <span id="basic-icon-default-phone2" class="input-group-text">
                        <i class='bx bx-cog'></i>
                    </span>
                    <textarea type="text" name="skills" class="form-control" id="skills" placeholder="{{ user.skills }}" required>{{ user.skills }}</textarea>
                </div>
            </div>
        </div>

        <div style="border-bottom: 3px solid #ccc; margin-bottom: 30px;" class="col-12" >
        </div>
        <b style="font-size: 15px; margin-bottom: 20px;" > Resume Related </b>

        <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9 col-12">
            <div class="form-group">
                <label for="skills">About me</label>
                <div class="input-group input-group-merge">
                    <span id="basic-icon-default-phone2" class="input-group-text">
                        <i class='bx bx-user-circle'></i>
                    </span>
                    <textarea type="text" name="aboutme" class="form-control" id="aboutme" placeholder="{{ user.aboutme }}" required>{{ user.aboutme }}</textarea>
                </div>
            </div>
        </div>

        

		</div>
  
		<div class="row gutters">
			<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" style="margin-bottom: 20px;">
		
			</div>
		</div>
        <div class="row gutters">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                <div class="text-right">
                    <button type="button"  id="confirmChangesBtn" class="genric-btn primary">Save Changes</button>
                </div>
            </div>
        </div>

        <script>
            document.getElementById('openModalBtn').addEventListener('click', function() {
                $('#confirmationModal').modal('show');
            });
    
        </script>

        <script>
            document.getElementById('confirmChangesBtn').addEventListener('click', function(event) {
                event.preventDefault(); // Prevent the default form submission
            
                Swal.fire({
                    title: 'Are you sure?',
                    text: "Confirm Save Changes",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Yes, save it!'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Perform the form submission
                        var form = document.getElementById('setupAccountForm');
                        
                        // Create a FormData object from the form
                        var formData = new FormData(form);
            
                        // Use Fetch API to submit the form data
                        fetch(form.action, {
                            method: form.method,
                            body: formData
                        }).then(response => {
                            if (response.ok) {
                                // Show success message
                                Swal.fire({
                                    title: 'Success!',
                                    text: 'Your changes have been saved.',
                                    icon: 'success',
                                    confirmButtonColor: '#3085d6'
                                }).then(() => {
                                    // Optionally, redirect or reload the page
                                    location.reload();
                                });
                            } else {
                                // Show error message if the submission fails
                                Swal.fire({
                                    title: 'Error!',
                                    text: 'There was a problem saving your changes.',
                                    icon: 'error',
                                    confirmButtonColor: '#d33'
                                });
                            }
                        }).catch(error => {
                            // Show error message if there is a network error or other issue
                            Swal.fire({
                                title: 'Error!',
                                text: 'There was a problem saving your changes.',
                                icon: 'error',
                                confirmButtonColor: '#d33'
                            });
                        });
                    }
                });
            });
            </script>

        <script>
            document.getElementById('uploadForm').addEventListener('submit', function(event) {
                event.preventDefault();  // Prevent the default form submission
    
                var formData = new FormData(this);
    
                fetch('/apply_peso', {
                    method: 'POST',
                    body: formData
                })
                .then(response => {
                    if (!response.ok) {
                        return response.json().then(data => {
                            throw new Error(data.error || 'Network response was not ok');
                        });
                    }
                    // Handle successful response
                    Swal.fire({
                        icon: 'success',
                        title: 'Success',
                        text: 'File uploaded successfully!',
                        allowOutsideClick: false, // Ensure the user cannot click outside the alert to close it
                        allowEscapeKey: false,    // Ensure the user cannot press ESC to close the alert
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = '/user_profile';  // Redirect to user profile
                        }
                    });
                })
                .catch(error => {
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: error.message,
                    });
                    console.error('There was an error!', error);
                });
            });
        </script>
            
       
  </form>
	</div>
</div>
</div>
</div>
</div>
<footer>
    <!-- Footer Start-->
    <div class="footer-area footer-bg" style="padding-top: 50px; margin-top: 30px;">
        <div class="container">
            <div class="row d-flex justify-content-between">
               
                <div class="col-xl-3 col-lg-3 col-md-4 col-sm-5">
                    <div class="single-footer-caption mb-50">
                        <div class="footer-tittle">
                            <h4>Contact Info</h4>
                            <ul>
                                <li>
                                <p>Address :Your address goes
                                    here, your demo address.</p>
                                </li>
                                <li><a href="#">Phone : 09216170786</a></li>
                                <li><a href="#">Email : pesopila@gmail.com</a></li>
                            </ul>
                        </div>

                    </div>
                </div>
           
            </div>
           <!--  -->
    
        </div>
    </div>
    <!-- footer-bottom area -->
    <div class="footer-bottom-area footer-bg">
        <div class="container">
            <div class="footer-border">
                 <div class="row d-flex justify-content-between align-items-center">
                     <div class="col-xl-10 col-lg-10 ">
                         <div class="footer-copy-right">
                             <p>
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | <a  target="">AW012</a>
</p>
                         </div>
                     </div>
                     <div class="col-xl-2 col-lg-2">
                         <div class="footer-social f-right">
                             <a href="#"><i class="fab fa-facebook-f"></i></a>
                             <a href="#"><i class="fab fa-twitter"></i></a>
                         </div>
                     </div>
                 </div>
            </div>
        </div>
    </div>
    <!-- Footer End-->
</footer>

</div>
</div>
<!-- All JS Custom Plugins Link Here here -->
<script src="static/assets/js/vendor/modernizr-3.5.0.min.js"></script>
<!-- Jquery, Popper, Bootstrap -->
<script src="static/assets/js/vendor/jquery-1.12.4.min.js"></script> <!-- Keep this line -->
<script src="static/assets/js/popper.min.js"></script>
<script src="static/assets/js/bootstrap.min.js"></script>
<!-- Jquery Mobile Menu -->
<script src="static/assets/js/jquery.slicknav.min.js"></script>

<!-- Jquery Slick , Owl-Carousel Range -->
<script src="static/assets/js/owl.carousel.min.js"></script>
<script src="static/assets/js/slick.min.js"></script>
<script src="static/assets/js/price_rangs.js"></script>
<!-- One Page, Animated-HeadLin -->
<script src="static/assets/js/wow.min.js"></script>
<script src="static/assets/js/animated.headline.js"></script>
<script src="static/assets/js/jquery.magnific-popup.js"></script>

<!-- Scrollup, nice-select, sticky -->
<script src="static/assets/js/jquery.scrollUp.min.js"></script>
<script src="static/assets/js/jquery.nice-select.min.js"></script>
<script src="static/assets/js/jquery.sticky.js"></script>

<!-- Bootstrap Datepicker -->


<!-- contact js -->
<script src="static/assets/js/contact.js"></script>
<script src="static/assets/js/jquery.form.js"></script>
<script src="static/assets/js/jquery.validate.min.js"></script>
<script src="static/assets/js/mail-script.js"></script>
<script src="static/assets/js/jquery.ajaxchimp.min.js"></script>

<!-- Jquery Plugins, main Jquery -->	
<script src="static/assets/js/plugins.js"></script>
<script src="static/assets/js/main.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<script>
$(document).ready(function(){
    $('#datepicker').datepicker({
        format: 'mm/dd/yyyy'  // Specify the format here
    });
});
    $('#passportExpDatepicker').datepicker({
        format: 'mm/dd/yyyy',
        autoclose: true,
        todayHighlight: true
    });
</script>
</body>

{% endblock %}